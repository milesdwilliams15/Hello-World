{
  "name": "Machine Learning for Text Analysis",
  "tagline": "A Structural Topic Model of Primary and General Presidential Debate Transcripts from 2000 to 2016",
  "body": "[Back to Main Page](https://milesdwilliams15.github.io/)\r\n\r\nHere's what I'm doing to create a structural topic model (STM) of primary and general presidential debates:\r\n\r\n    ## Structural Topic Model (STM) of Primary & General Presidential Debates (2000-2016)\r\n    # Debate Transcripts stored in: text <- c(R1,...,P15)\r\n    # Metadata stored in: metDat<-data.frame(debateID,year)\r\n    library(stm) # upload stm package from the library\r\n\r\nFirst, I've created a vector of text objects (which I've called \"text\") where each object (R1,...,P15) contains the text for a primary or presidential debate transcript. I then created an object called \"metDat,\" which is a matrix of metadata associated with each debate transcript (i.e., the election year of the debate and whether the debate was a Republican or Democratic primary debate, or a general election Presidential debate). Once I've made these, I then open the \"stm\" package in R.\r\n\r\nBefore I can actually create a STM, I have to process the text data using the textProcessor() command in the stm package:\r\n\r\n    # Process text data:\r\n    debates<-textProcessor(documents=text,\r\n                       metadata=metaDat,\r\n                       verbos=FALSE) \r\n\r\nThe processed text is now in an object called \"debates.\" \r\n\r\nNow I can go ahead and run a STM using the stm() command:\r\n\r\n    # Estimate STM:\r\n    stm1<-stm(documents=debates$documents,\r\n              vocab=debates$vocab,\r\n              K=15,\r\n              prevalence=~debateID+s(year),\r\n              data=metDat)\r\n\r\nResults can be visualized in a number of ways using the plot.STM() command:\r\n\r\n    # Visualize results in \"label\" format:\r\n    par(mfcol=c(1,3))\r\n    plot.STM(stm1,type=\"labels\",topics=1:5,width=50,text.cex=1.25)\r\n    plot.STM(stm1,type=\"labels\",topics=6:10,width=50,text.cex=1.25)\r\n    plot.STM(stm1,type=\"labels\",topics=11:15,width=50,text.cex=1.25)\r\n\r\n    # Visualize results in \"summary\" format:\r\n    par(mfcol=c(1,1))\r\n    plot.STM(stm1,type=\"summary\")\r\n\r\nBeyond just doing some basic summary visualizations, I can also go further and visualize estimated effects. Doing so will allow me to show what topics are more likely to appear in Democratic vs. Republican vs. general debates, both in general and over time:\r\n\r\n    # Estimate Model Effects:\r\n    stm1effect<-estimateEffect(formula=1:15~debateID+s(year),\r\n                               stmobj=stm1,\r\n                               metadata=metDat)        #smooth the effect of year\r\n\r\n    # Visualize Estimated Effects:\r\n    plot.estimateEffect(stm1effect,\r\n                        covariate=\"debateID\",\r\n                        model=stm1,\r\n                        topics=stm1effect$topics[1:5]) #makes a pointestimate plot\r\n\r\n    # Make overlapping continuous plots to show expected topic proportions over time per type of debate:\r\n    plot.estimateEffect(stm1effect,                    #Topic proportions in Rep. debates\r\n                        covariate=\"year\",\r\n                        model=stm1,\r\n                        topics=stm1effect$topics[10],\r\n                        method=\"continuous\",\r\n                        xlab=\"Election Year\",\r\n                        ylab=\"Expected Topic Proportions\",\r\n                        moderator=\"debateID\",\r\n                        moderator.value=\"Republican\",\r\n                        ylim=c(-.1,.45),\r\n                        linecol=\"red\",\r\n                        printlegend=F)\r\n    plot.estimateEffect(stm1effect,                    #Topic proportions in Dem. debates\r\n                        covariate=\"year\",\r\n                        model=stm1,\r\n                        topics=stm1effect$topics[10],\r\n                        method=\"continuous\",\r\n                        xlab=\"Election Year\",\r\n                        ylab=\"Expected Topic Proportions\",\r\n                        moderator=\"debateID\",\r\n                        moderator.value=\"Democrat\",\r\n                        ylim=c(-.1,.45),\r\n                        linecol=\"blue\",\r\n                        printlegend=F,add=T)\r\n    plot.estimateEffect(stm1effect,                    #Topic proportions in Pres. debates\r\n                        covariate=\"year\",\r\n                        model=stm1,\r\n                        topics=stm1effect$topics[10],\r\n                        method=\"continuous\",\r\n                        xlab=\"Election Year\",\r\n                        ylab=\"Expected Topic Proportions\",\r\n                        moderator=\"debateID\",\r\n                        moderator.value=\"Presidential\",\r\n                        ylim=c(-.1,.45),\r\n                        linecol=\"green\",\r\n                        printlegend=F,add=T)\r\n\r\nFinally, I can show graphically topic correlations:\r\n\r\n    #Visualize Topic Correlations:\r\n    plot(topicCorr(stm1))\r\n\r\n[Back to Main Page](https://milesdwilliams15.github.io/)",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}